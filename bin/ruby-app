#!/usr/bin/env ruby

require 'rubygems'
require 'thor/group'

class RubyAppGenerator < Thor::Group
  include Thor::Actions
 
  # Define arguments and options
  argument :name
  class_option :ar, :default => false
 
  def copy_tree
    directory('project', "#{name}/")
    empty_directory("#{name}/log")
    empty_directory("#{name}/tmp")
    
    if ar
      copy_file("database.yml", "#{name}/config/database.yml")
      empty_directory("#{name}/db/migrate")
    end
  end
  
  def chmod_example_bin
    chmod "#{name}/bin/example", 0755
    chmod "#{name}/bin/console", 0755
  end
  
private

  def self.source_root
    File.join(File.dirname(__FILE__), %w{.. generator })
  end
  
  def base_name 
    File.basename(name)
  end
  
  def ar 
    options[:ar]
  end
  
end

RubyAppGenerator.start